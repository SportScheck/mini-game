!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MiniGame=e()}}(function(){return function e(t,i,s){function n(r,h){if(!i[r]){if(!t[r]){var o="function"==typeof require&&require;if(!h&&o)return o(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return n(i||e)},c,c.exports,e,t,i,s)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t,i){"use strict";var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();var n=function(){function e(t,i,s,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameArea=t,this.x=n,this.y=a,this.image=i,this.speed=s}return s(e,[{key:"updateSpeed",value:function(e){this.speed=e}},{key:"draw",value:function(){this.x-=this.speed,this.gameArea.context.drawImage(this.image,this.x,this.y),this.gameArea.context.drawImage(this.image,this.x+this.image.width,this.y),Math.abs(this.x)>=this.image.width&&(this.x=0)}}]),e}();t.exports=n},{}],2:[function(e,t,i){"use strict";var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=o(e("./background")),a=o(e("./obstacle")),r=o(e("./runner")),h=o(e("./score"));function o(e){return e&&e.__esModule?e:{default:e}}var u=2,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;this.gameArea={canvas:document.getElementById("minigame"),start:function(){t._setCanvasWidth("initial"),this.context=this.canvas.getContext("2d"),this.frameNo=0,this.canvas.classList.add("minigame--started")},stop:function(){window.cancelAnimationFrame(t.myReq)}},this.totalAssets=0,this.loadedAssets=0,this.splashScreen=!1,this.initalStart=!0,this.myReq=null,this.level=0,this.isCrashed=!1,this.images={},this.ground=null,this.clouds=null,this.skyline=null,this.runner=null,this.score=null,this.obstaclesArray=new Array,this.referenceSpeed=u,this._preloader()}return s(e,[{key:"_setCanvasWidth",value:function(e){var t=document.getElementsByClassName("minigame-container")[0].clientWidth,i=t<600?t:600;this.gameArea.canvas.width=i,this.gameArea.x=i,this.gameArea.canvas.height=300,this.gameArea.y=300,"resize"===e&&this.score.onResize(i)}},{key:"_debounce",value:function(e,t,i){var s=void 0;return function(){var n=this,a=arguments,r=i&&!s;clearTimeout(s),s=setTimeout(function(){s=null,i||e.apply(n,a)},t),r&&e.apply(n,a)}}},{key:"_assetLoaded",value:function(){var e=this;if(this.loadedAssets++,this.splashScreen=!0,this.loadedAssets===this.totalAssets){window.addEventListener("keydown",function(t){32==t.keyCode&&(t.preventDefault(),e._hideSplashscreen())});var t=document.querySelector("#minigame");t.addEventListener("touchstart",function(){e._hideSplashscreen()}),t.addEventListener("mousedown",function(){e._hideSplashscreen()})}}},{key:"_hideSplashscreen",value:function(){!0===this.splashScreen&&(this.splashScreen=!1,document.getElementById("minigame").style.display="block",this._startGame())}},{key:"_loadFont",value:function(){document.getElementsByTagName("head")[0];var e=document.createElement("link");e.href="https://fonts.googleapis.com/css?family=Press+Start+2P",e.rel="stylesheet",document.head.appendChild(e)}},{key:"_preloader",value:function(){var e=this,t={ground:"https://amp.sportscheck.com/i/sportscheck/minigame_ground",clouds:"https://amp.sportscheck.com/i/sportscheck/minigame_clouds",skyline:"https://amp.sportscheck.com/i/sportscheck/minigame_skyline",runner:"https://amp.sportscheck.com/i/sportscheck/minigame_runner_sprite",fire:"https://amp.sportscheck.com/i/sportscheck/minigame_fire_sprite"};this.totalAssets=Object.keys(t).length,Object.keys(t).forEach(function(i){e.images[i]=new Image,e.images[i].onload=function(){this._assetLoaded()}.bind(e),e.images[i].src=t[i]}),this._loadFont()}},{key:"_crash",value:function(e,t){var i=e.x,s=e.x+e.frameWidth,n=(e.y,e.y+e.dy+e.frameHeight),a=t.x,r=t.x+t.frameWidth,h=t.y;t.y,t.frameHeight;s<a||i>r||n<h||(this.isCrashed=!0)}},{key:"_animate",value:function(){var e=this;this.myReq=window.requestAnimationFrame(this._animate.bind(this)),this.gameArea.context.clearRect(0,0,this.gameArea.canvas.width,this.gameArea.canvas.height),this.obstaclesArray.forEach(function(t){e._crash(e.runner,t)}),this.skyline.draw(),this.clouds.draw(),this.ground.draw(),this.isCrashed&&this.runner.crash(),this.runner.update(),this.runner.draw(),this._createObstacles(),this.obstaclesArray.forEach(function(t){t.update(),t.draw();var i=e.obstaclesArray.length;if(i>6)for(var s=0;s<i-2;)s++,e.obstaclesArray.shift()}),this.score.update(),this.isCrashed&&(this.runner.reset(),this.ground.updateSpeed(u),this.referenceSpeed=u,this.score.done(),this.gameArea.stop(),this.splashScreen=!0),this.gameArea.frameNo++,this.gameArea.frameNo%500==0&&this._nextLevel()}},{key:"_createObstacles",value:function(){if(1==this.gameArea.frameNo||this.gameArea.frameNo/(130-5*this.level)%1==0){var e=Math.floor(99*Math.random()+1);e%2==0&&this.obstaclesArray.push(new a.default(this.gameArea,this.images.fire,this.referenceSpeed,600+e))}}},{key:"_updateObstaclesSpeed",value:function(e,t){for(var i=0;i<e.length;i++)e[i].updateSpeed(t)}},{key:"_nextLevel",value:function(){this.level+=1,this.referenceSpeed=u+this.level/2,this.runner.nextLevel(this.level),this.ground.updateSpeed(this.referenceSpeed),this._updateObstaclesSpeed(this.obstaclesArray,this.referenceSpeed)}},{key:"_startGame",value:function(){this.initalStart?(this.initalStart=!1,this.gameArea.start(),this.skyline=new n.default(this.gameArea,this.images.skyline,.3,0,40),this.clouds=new n.default(this.gameArea,this.images.clouds,.6,0,40),this.ground=new n.default(this.gameArea,this.images.ground,u,0,280),this.runner=new r.default(this.gameArea,this.images.runner,this.level),this.score=new h.default(this.gameArea)):(this.gameArea.frameNo=0,this.obstaclesArray=[],this.isCrashed=!1,this.level=0,this.runner.reset());var e=this._debounce(function(){this._setCanvasWidth("resize"),window.cancelAnimationFrame(this.myReq),this._animate()}.bind(this),250);window.addEventListener("resize",e),this._animate()}}]),e}();t.exports=c},{"./background":1,"./obstacle":3,"./runner":4,"./score":5}],3:[function(e,t,i){"use strict";var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();var n=60,a=52,r=8,h=function(){function e(t,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameArea=t,this.image=i,this.frameWidth=a,this.frameHeight=n,this.endFrame=4,this.frameSpeed=r,this.framesPerRow=Math.floor(this.image.width/this.frameWidth),this.currentFrame=0,this.counter=0,this.x=600,this.y=230,this.speed=s}return s(e,[{key:"updateSpeed",value:function(e){this.speed=e}},{key:"update",value:function(){this.counter==this.frameSpeed-1&&(this.currentFrame=(this.currentFrame+1)%this.endFrame),this.counter=(this.counter+1)%this.frameSpeed}},{key:"draw",value:function(){if(!(this.x<-this.image.width)){this.x-=this.speed;var e=Math.floor(this.currentFrame/this.framesPerRow),t=Math.floor(this.currentFrame%this.framesPerRow);this.gameArea.context.drawImage(this.image,t*this.frameWidth,e*this.frameHeight,this.frameWidth,this.frameHeight,this.x,this.y,this.frameWidth,this.frameHeight)}}}]),e}();t.exports=h},{}],4:[function(e,t,i){"use strict";var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();var n=72,a=40,r=8,h=130,o=function(){function e(t,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameArea=t,this.level=s,this.image=i,this.frameWidth=a,this.frameHeight=n,this.endFrame=3,this.frameSpeed=r,this.framesPerRow=Math.floor(this.image.width/this.frameWidth),this.currentFrame=0,this.counter=0,this.jumpCounter=h,this.jumpTime=h,this.dy=0,this.isFalling=!1,this.isJumping=!1,this.isCrashed=!1,this.x=60,this.y=220,this.increaseLevel=!1;var o=this,u=document.querySelector("#minigame");window.addEventListener("keydown",function(e){32!==e.keyCode||o.isFalling||(o.isJumping=!0)}),u.addEventListener("mousedown",function(e){o.isFalling||(o.isJumping=!0)}),u.addEventListener("touchstart",function(e){o.isFalling||(o.isJumping=!0)})}return s(e,[{key:"_updateLevel",value:function(){this.jumpTime=h-10*this.level,this.jumpCounter=this.jumpTime}},{key:"_calculateHeightChange",value:function(e){var t=-450*Math.pow(e/this.jumpTime-.5,2);return-450*Math.pow((e+1)/this.jumpTime-.5,2)-t}},{key:"_jump",value:function(){this.isJumping&&(this.dy-=this._calculateHeightChange(this.jumpTime-this.jumpCounter),this.jumpCounter--),this.isFalling&&(this.dy-=this._calculateHeightChange(this.jumpTime-this.jumpCounter),this.jumpCounter--),this.jumpCounter===this.jumpTime/2&&(this.isJumping=!1,this.isFalling=!0),0===this.jumpCounter&&(this.isFalling=!1,this.jumpCounter=this.jumpTime)}},{key:"_runningAnim",value:function(e,t,i,s,n,a){this.gameArea.context.drawImage(this.image,e*i,t*s,i,s,n,a+this.dy,i,s)}},{key:"_jumpingAnim",value:function(e,t,i,s,n,a){this.gameArea.context.drawImage(this.image,i,0,i,s,n,a+this.dy,i,s)}},{key:"_crashAnim",value:function(e,t,i,s,n,a){this.gameArea.context.drawImage(this.image,3*i,0,i,s,n,a+this.dy,i,s)}},{key:"nextLevel",value:function(e){this.level=e,this.increaseLevel=!0}},{key:"crash",value:function(){this.isCrashed=!0}},{key:"update",value:function(){this.counter==this.frameSpeed-1&&(this.currentFrame=(this.currentFrame+1)%this.endFrame),this.counter=(this.counter+1)%this.frameSpeed}},{key:"reset",value:function(){this.isCrashed=!1,this.isJumping=!1,this.isFalling=!1,this.level=0,this.dy=0,this.currentFrame=0,this.counter=0,this.jumpTime=h-15*this.level,this.jumpCounter=this.jumpTime}},{key:"draw",value:function(){var e=Math.floor(this.currentFrame/this.framesPerRow),t=Math.floor(this.currentFrame%this.framesPerRow);this._jump(),this.isCrashed?this._crashAnim(t,e,this.frameWidth,this.frameHeight,this.x,this.y):this.isJumping||this.isFalling?this._jumpingAnim(t,e,this.frameWidth,this.frameHeight,this.x,this.y):(this.increaseLevel&&(this._updateLevel(),this.increaseLevel=!1),this._runningAnim(t,e,this.frameWidth,this.frameHeight,this.x,this.y))}}]),e}();t.exports=o},{}],5:[function(e,t,i){"use strict";var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();var n='"Press Start 2P"',a=.003,r=.006,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameArea=t,this.font=n,this.size=a*this.gameArea.x,this.headlineSize=r*this.gameArea.x,this.speed=3,this.color="black",this.distance=0,this.calories=0,this.x=this.gameArea.x/2,this.y=40}return s(e,[{key:"_checkFontSize",value:function(){this.size>1.4&&(this.size=1.4),this.headlineSize>2.5&&(this.headlineSize=2.5)}},{key:"onResize",value:function(e){this.x=e/2,this.size=a*(2*this.x),this.headlineSize=r*(2*this.x)}},{key:"update",value:function(){var e=this.gameArea.context;this.distance=parseInt(this.gameArea.frameNo/50*this.speed);var t="GELAUFENE STRECKE: "+this.distance+"M";this._checkFontSize(),e.font=this.size+"em "+this.font,e.fillStyle=this.color,e.textAlign="center",e.fillText(t,this.x,this.y)}},{key:"done",value:function(){var e=this.gameArea.context;this.calories=parseInt(this.gameArea.frameNo/50*.2);var t="DU HAST "+this.calories+" KCAL VERBRANNT!";e.fillStyle=this.color,e.textAlign="center",this._checkFontSize(),e.font=this.headlineSize+"em "+this.font,e.fillText("G A M E  O V E R",this.x,100),this.size>1.4&&(this.size=1.4),e.font=this.size+"em "+this.font,e.fillText(t,this.x,140),e.fillText("STARTEN & SPRINGEN MIT",this.x,180),e.fillText("LEERTASTE ODER KLICK",this.x,200)}}]),e}();t.exports=h},{}]},{},[2])(2)});